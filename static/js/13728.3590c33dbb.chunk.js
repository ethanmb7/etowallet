"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13728],{13728:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ExportPrivateKeys});var n=o(324586),r=o(586330),a=o(514041),i=o(908867),s=o(578104),c=o(490343),l=o(610421),d=o(325809),u=o(575995),y=o(498356),p=o(911998),f=o(162616),b=o(625931),k=o(319357),w=o(16853),m=o(334439),x=o(491180),h=o(482407),g=o(714191),v=o(831085);function CopyPrivateKeysDialog({defaultValue:e,rawKeyContent:t,showCheckBox:o}){var n=(0,i.A)(),[s,l]=(0,a.useState)(e),d=(0,a.useCallback)((function(e){l(!!e)}),[]),u=(0,c.useClipboard)();return(0,v.jsxs)(v.Fragment,{children:[o?(0,v.jsx)(c.Stack,{pr:"$1",children:(0,v.jsx)(c.Checkbox,{testID:"private-key-copy-check",value:s,onChange:d,label:n.formatMessage({id:m.ETranslations.global_private_key_copy_check})})}):null,(0,v.jsx)(c.Dialog.Footer,{onConfirmText:n.formatMessage({id:m.ETranslations.global_copy}),confirmButtonProps:{testID:"private-key-copy-confirm",disabled:o&&!s},onConfirm:(0,r.A)((function*(){u.copyText(t)}))})]})}function ownKeys(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(o),!0).forEach((function(t){(0,n.A)(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ExportPrivateKeysPage({indexedAccount:e,account:t,accountName:o,title:n,exportType:g}){var C,j,{activeAccount:A}=(0,f.LH)({num:0}),T=(0,y.A)(),_=(0,i.A)(),E=(0,c.useMedia)(),[P,K]=(0,a.useState)(!0),O=(0,c.useClipboard)(),I=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isImportedAccount({accountId:t?.id}))}),[t,e]),M=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isWatchingAccount({accountId:t?.id}))}),[t,e]),S=!!e,{result:D=[]}=(0,p.yk)((0,r.A)((function*(){return I&&t?.createAtNetwork||M&&t?.createAtNetwork?[t?.createAtNetwork]:(yield l.A.serviceNetwork.getSupportExportAccountKeyNetworks({exportType:g})).map((function(e){return e.network.id}))})),[t?.createAtNetwork,g,I,M]),N=(0,a.useMemo)((function(){return I||M?t?.createAtNetwork||(0,b.V)().btc:A?.network?.id||(0,b.V)().btc}),[t?.createAtNetwork,A?.network?.id,I,M]),$=(0,c.useForm)({values:{networkId:N,deriveType:null!=(C=A?.deriveType)?C:void 0,rawKeyContent:""},mode:"onChange",reValidateMode:"onBlur"}),B=$.watch("networkId"),V=$.watch("deriveType"),F=$.watch("rawKeyContent"),z=(0,a.useCallback)((function(){$.setValue("rawKeyContent",""),$.clearErrors("rawKeyContent"),K(!0)}),[$]),q=(0,a.useCallback)((j=(0,r.A)((function*({accountId:e,indexedAccountId:t,networkId:n,deriveType:r}){if(z(),(t||e)&&n&&(!S||r))try{var a=yield l.A.serviceAccount.exportAccountKeysByType({indexedAccountId:t,accountId:e,networkId:n,deriveType:r||void 0,exportType:g,accountName:o});a&&$.setValue("rawKeyContent",a)}catch(e){var i;throw[k.d.PasswordPromptDialogCancel].includes(e?.className)||$.setError("rawKeyContent",null!=(i=w.Ay.toPlainErrorObject(e))?i:{message:"error"}),e}})),function(e){return j.apply(this,arguments)}),[o,g,$,S,z]),H=(0,s.YQ)(q,600),W=(0,a.useCallback)((0,r.A)((function*({noDebouncedCall:o}={}){z();var n=o?q:H;yield n({accountId:t?.id,indexedAccountId:e?.id,networkId:B||"",deriveType:V})})),[t?.id,V,q,H,e?.id,B,z]),Y=(0,a.useMemo)((function(){return[{testID:"account-key-show-btn",iconName:P?"EyeOutline":"EyeOffOutline",onPress:(t=(0,r.A)((function*(){F||(yield W({noDebouncedCall:!0})),K(!P)})),function onPress(){return t.apply(this,arguments)})},{iconName:"Copy3Outline",testID:"account-key-copy-btn",onPress:(e=(0,r.A)((function*(){F||(yield W({noDebouncedCall:!0})),"privateKey"===g?function showCopyPrivateKeysDialog({title:e,description:t,defaultChecked:o,rawKeyContent:n,showCheckBox:r}){return c.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:(0,v.jsx)(CopyPrivateKeysDialog,{rawKeyContent:n,defaultValue:o,showCheckBox:r})})}({title:_.formatMessage({id:m.ETranslations.global_private_key_copy}),description:_.formatMessage({id:m.ETranslations.global_private_key_copy_information}),showCheckBox:!0,defaultChecked:!1,rawKeyContent:$.getValues("rawKeyContent")||""}):O.copyText($.getValues("rawKeyContent"))})),function onPress(){return e.apply(this,arguments)})}];var e,t}),[O,g,$,_,F,W,P]);(0,a.useEffect)((function(){B&&$.setValue("deriveType","")}),[$,B]),(0,a.useEffect)((function(){(0,h.Gb)(B,V),z()}),[V,B,z]);var G=(0,a.useMemo)((function(){var e="key";return"publicKey"===g&&(e=_.formatMessage({id:m.ETranslations.global_public_key})),"privateKey"===g&&(e=_.formatMessage({id:m.ETranslations.global_private_key})),e}),[g,_]);return(0,v.jsxs)(c.Page,{scrollEnabled:!0,safeAreaEnabled:!0,children:[(0,v.jsx)(c.Page.Header,{title:n}),(0,v.jsxs)(c.Page.Body,{p:"$4",children:[(0,v.jsxs)(c.Form,{form:$,children:[(0,v.jsx)(c.Form.Field,{label:_.formatMessage({id:m.ETranslations.global_network}),name:"networkId",disabled:I,children:(0,v.jsx)(d.YS,{disabled:I,editable:!I,networkIds:D})}),I||M?null:(0,v.jsx)(u.FB,{fieldName:"deriveType",networkId:B}),(0,v.jsx)(c.Form.Field,{label:G,name:"rawKeyContent",children:(0,v.jsx)(c.Input,{testID:"account-key-input",size:E.gtMd?"medium":"large",editable:!1,placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••",secureTextEntry:P,addOns:Y,displayAsMaskWhenEmptyValue:!0})})]}),"privateKey"===g?(0,v.jsxs)(c.Stack,{py:"$4",children:[(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:m.ETranslations.faq_private_key})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:m.ETranslations.faq_private_key_desc})}),(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:m.ETranslations.faq_private_key_keep})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:m.ETranslations.faq_private_key_keep_desc})})]}):null,null]}),(0,v.jsx)(c.Page.Footer,{onConfirmText:_.formatMessage({id:m.ETranslations.global_done}),confirmButtonProps:{disabled:!1},onConfirm:(0,r.A)((function*(){T.popStack()}))})]})}function ExportPrivateKeys({route:e}){return(0,v.jsx)(d.b8,{enabledNum:[0],config:{sceneName:g.Zs.home,sceneUrl:""},children:(0,v.jsx)(ExportPrivateKeysPage,_objectSpread({},e.params))})}}}]);